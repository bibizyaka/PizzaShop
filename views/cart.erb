<h2>Your Cart Products</h2>

<div class="container">
	<div class="row">
       <table class="table table-striped">
       	<thead> 
          <th>Product</th>
          <th>Quantity</th>
       	</thead>
       	<tbody>
			<%@orders.each do |order| %>
				<%#order = order.split("=")%>
		        <tr><td><%=order[0]%></td>
		        	<td><%=order[1]%></td>
		        </tr>
			<%end%>
		</tbody>
	</table>
	</div>

  	<h2>Submit Order:</h2>
	<div calss="container">
       <div class="row">
        <div class="col-md-4">
	       	<form method="POST" action="/order">
			  <div class="form-group">
			    <label for="name">Name</label>
			    <input type="text" name="cart_order[name]" class="form-control" id="name" placeholder="Name">
			  </div>
			  <div class="form-group">
			    <label for="phone">Phone</label>
			    <input type="tel" name="cart_order[phone]" class="form-control" id="phone" placeholder="Phone">
			  </div>
			  
			  <div class="form-group">
			    <label for="phone">Address</label>
			    <textarea class="form-control" rows="3" placeholder="Address" name="cart_order[address]"></textarea>
			  </div>

			   <div class="form-group">
  			     <input type="hidden" name="cart_order[order_details]" id="order_details" />
  			 </div>

			  <button type="submit" class="btn btn-primary">Submit Order</button>
		</form>
	</div>

       </div>
	</div>
</div>

<script>

$(document).ready(function() {

  $('#order_details').val(get_orders);
});

	
function get_orders() {

 var orders = "";
     for (var i = 0; i < localStorage.length; i++) {
	
       var key = window.localStorage.key(i);
       var value = window.localStorage.getItem(key);

         if (value.indexOf("product_") != 0) {
         	
         	orders = orders + key + "=" + value + ",";
         }
	}//for
	orders = orders.slice(0, -1);
	$('.test').val(orders);
	return orders;

} // function



</script>
